{"ast":null,"code":"import copy from 'fast-copy';\nimport qs from 'qs';\nimport isString from 'lodash.isstring';\nimport pThrottle from 'p-throttle';\nimport isPlainObject from 'lodash.isplainobject';\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (null != _i) {\n    var _s,\n        _e,\n        _x,\n        _r,\n        _arr = [],\n        _n = !0,\n        _d = !1;\n\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\nfunction _wrapRegExp() {\n  _wrapRegExp = function (re, groups) {\n    return new BabelRegExp(re, void 0, groups);\n  };\n\n  var _super = RegExp.prototype,\n      _groups = new WeakMap();\n\n  function BabelRegExp(re, flags, groups) {\n    var _this = new RegExp(re, flags);\n\n    return _groups.set(_this, groups || _groups.get(re)), _setPrototypeOf(_this, BabelRegExp.prototype);\n  }\n\n  function buildGroups(result, re) {\n    var g = _groups.get(re);\n\n    return Object.keys(g).reduce(function (groups, name) {\n      var i = g[name];\n      if (\"number\" == typeof i) groups[name] = result[i];else {\n        for (var k = 0; void 0 === result[i[k]] && k + 1 < i.length;) k++;\n\n        groups[name] = result[i[k]];\n      }\n      return groups;\n    }, Object.create(null));\n  }\n\n  return _inherits(BabelRegExp, RegExp), BabelRegExp.prototype.exec = function (str) {\n    var result = _super.exec.call(this, str);\n\n    if (result) {\n      result.groups = buildGroups(result, this);\n      var indices = result.indices;\n      indices && (indices.groups = buildGroups(indices, this));\n    }\n\n    return result;\n  }, BabelRegExp.prototype[Symbol.replace] = function (str, substitution) {\n    if (\"string\" == typeof substitution) {\n      var groups = _groups.get(this);\n\n      return _super[Symbol.replace].call(this, str, substitution.replace(/\\$<([^>]+)>/g, function (_, name) {\n        var group = groups[name];\n        return \"$\" + (Array.isArray(group) ? group.join(\"$\") : group);\n      }));\n    }\n\n    if (\"function\" == typeof substitution) {\n      var _this = this;\n\n      return _super[Symbol.replace].call(this, str, function () {\n        var args = arguments;\n        return \"object\" != typeof args[args.length - 1] && (args = [].slice.call(args)).push(buildGroups(args, _this)), substitution.apply(this, args);\n      });\n    }\n\n    return _super[Symbol.replace].call(this, str, substitution);\n  }, _wrapRegExp.apply(this, arguments);\n}\n\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function () {};\n\n      return {\n        s: F,\n        n: function () {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function (e) {\n          throw e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function () {\n      it = it.call(o);\n    },\n    n: function () {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function (e) {\n      didErr = true;\n      err = e;\n    },\n    f: function () {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nfunction isNode() {\n  /**\n   * Polyfills of 'process' might set process.browser === true\n   *\n   * See:\n   * https://github.com/webpack/node-libs-browser/blob/master/mock/process.js#L8\n   * https://github.com/defunctzombie/node-process/blob/master/browser.js#L156\n   **/\n  return typeof process !== 'undefined' && !process.browser;\n}\n\nfunction isReactNative() {\n  return typeof window !== 'undefined' && 'navigator' in window && 'product' in window.navigator && window.navigator.product === 'ReactNative';\n}\n\nfunction getNodeVersion() {\n  return process.versions && process.versions.node ? \"v\".concat(process.versions.node) : process.version;\n}\n\nfunction getWindow() {\n  return window;\n}\n\nfunction noop() {\n  return undefined;\n}\n\nvar PERCENTAGE_REGEX = /*#__PURE__*/_wrapRegExp(/(\\d+)(%)/, {\n  value: 1\n});\n\nfunction calculateLimit(type) {\n  var max = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 7;\n  var limit = max;\n\n  if (PERCENTAGE_REGEX.test(type)) {\n    var _type$match;\n\n    var groups = (_type$match = type.match(PERCENTAGE_REGEX)) === null || _type$match === void 0 ? void 0 : _type$match.groups;\n\n    if (groups && groups.value) {\n      var percentage = parseInt(groups.value) / 100;\n      limit = Math.round(max * percentage);\n    }\n  }\n\n  return Math.min(30, Math.max(1, limit));\n}\n\nfunction createThrottle(limit, logger) {\n  logger('info', \"Throttle request to \".concat(limit, \"/s\"));\n  return pThrottle({\n    limit: limit,\n    interval: 1000,\n    strict: false\n  });\n}\n\nvar rateLimitThrottle = function (axiosInstance) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'auto';\n  var _axiosInstance$defaul = axiosInstance.defaults.logHandler,\n      logHandler = _axiosInstance$defaul === void 0 ? noop : _axiosInstance$defaul;\n  var limit = isString(type) ? calculateLimit(type) : calculateLimit('auto', type);\n  var throttle = createThrottle(limit, logHandler);\n  var isCalculated = false;\n  var requestInterceptorId = axiosInstance.interceptors.request.use(function (config) {\n    return throttle(function () {\n      return config;\n    })();\n  }, function (error) {\n    return Promise.reject(error);\n  });\n  var responseInterceptorId = axiosInstance.interceptors.response.use(function (response) {\n    if (!isCalculated && isString(type) && (type === 'auto' || PERCENTAGE_REGEX.test(type)) && response.headers && response.headers['x-contentful-ratelimit-second-limit']) {\n      var rawLimit = parseInt(response.headers['x-contentful-ratelimit-second-limit']);\n      var nextLimit = calculateLimit(type, rawLimit);\n\n      if (nextLimit !== limit) {\n        if (requestInterceptorId) {\n          axiosInstance.interceptors.request.eject(requestInterceptorId);\n        }\n\n        limit = nextLimit;\n        throttle = createThrottle(nextLimit, logHandler);\n        requestInterceptorId = axiosInstance.interceptors.request.use(function (config) {\n          return throttle(function () {\n            return config;\n          })();\n        }, function (error) {\n          return Promise.reject(error);\n        });\n      }\n\n      isCalculated = true;\n    }\n\n    return response;\n  }, function (error) {\n    return Promise.reject(error);\n  });\n  return function () {\n    axiosInstance.interceptors.request.eject(requestInterceptorId);\n    axiosInstance.interceptors.response.eject(responseInterceptorId);\n  };\n};\n\nvar delay = function delay(ms) {\n  return new Promise(function (resolve) {\n    setTimeout(resolve, ms);\n  });\n};\n\nvar defaultWait = function defaultWait(attempts) {\n  return Math.pow(Math.SQRT2, attempts);\n};\n\nfunction rateLimit(instance) {\n  var maxRetry = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n  var _instance$defaults = instance.defaults,\n      _instance$defaults$re = _instance$defaults.responseLogger,\n      responseLogger = _instance$defaults$re === void 0 ? noop : _instance$defaults$re,\n      _instance$defaults$re2 = _instance$defaults.requestLogger,\n      requestLogger = _instance$defaults$re2 === void 0 ? noop : _instance$defaults$re2;\n  instance.interceptors.request.use(function (config) {\n    requestLogger(config);\n    return config;\n  }, function (error) {\n    requestLogger(error);\n    return Promise.reject(error);\n  });\n  instance.interceptors.response.use(function (response) {\n    // we don't need to do anything here\n    responseLogger(response);\n    return response;\n  }, function (error) {\n    var response = error.response;\n    var config = error.config;\n    responseLogger(error); // Do not retry if it is disabled or no request config exists (not an axios error)\n\n    if (!config || !instance.defaults.retryOnError) {\n      return Promise.reject(error);\n    } // Retried already for max attempts\n\n\n    var doneAttempts = config.attempts || 1;\n\n    if (doneAttempts > maxRetry) {\n      error.attempts = config.attempts;\n      return Promise.reject(error);\n    }\n\n    var retryErrorType = null;\n    var wait = defaultWait(doneAttempts); // Errors without response did not receive anything from the server\n\n    if (!response) {\n      retryErrorType = 'Connection';\n    } else if (response.status >= 500 && response.status < 600) {\n      // 5** errors are server related\n      retryErrorType = \"Server \".concat(response.status);\n    } else if (response.status === 429) {\n      // 429 errors are exceeded rate limit exceptions\n      retryErrorType = 'Rate limit'; // all headers are lowercased by axios https://github.com/mzabriskie/axios/issues/413\n\n      if (response.headers && error.response.headers['x-contentful-ratelimit-reset']) {\n        wait = response.headers['x-contentful-ratelimit-reset'];\n      }\n    }\n\n    if (retryErrorType) {\n      // convert to ms and add jitter\n      wait = Math.floor(wait * 1000 + Math.random() * 200 + 500);\n      instance.defaults.logHandler('warning', \"\".concat(retryErrorType, \" error occurred. Waiting for \").concat(wait, \" ms before retrying...\")); // increase attempts counter\n\n      config.attempts = doneAttempts + 1;\n      /* Somehow between the interceptor and retrying the request the httpAgent/httpsAgent gets transformed from an Agent-like object\n       to a regular object, causing failures on retries after rate limits. Removing these properties here fixes the error, but retry\n       requests still use the original http/httpsAgent property */\n\n      delete config.httpAgent;\n      delete config.httpsAgent;\n      return delay(wait).then(function () {\n        return instance(config);\n      });\n    }\n\n    return Promise.reject(error);\n  });\n}\n\nfunction asyncToken(instance, getToken) {\n  instance.interceptors.request.use(function (config) {\n    return getToken().then(function (accessToken) {\n      config.headers = _objectSpread2(_objectSpread2({}, config.headers), {}, {\n        Authorization: \"Bearer \".concat(accessToken)\n      });\n      return config;\n    });\n  });\n} // Matches 'sub.host:port' or 'host:port' and extracts hostname and port\n// Also enforces toplevel domain specified, no spaces and no protocol\n\n\nvar HOST_REGEX = /^(?!\\w+:\\/\\/)([^\\s:]+\\.?[^\\s:]+)(?::(\\d+))?(?!:)$/;\n/**\n * Create pre configured axios instance\n * @private\n * @param {AxiosStatic} axios - Axios library\n * @param {CreateHttpClientParams} options - Initialization parameters for the HTTP client\n * @return {ContentfulAxiosInstance} Initialized axios instance\n */\n\nfunction createHttpClient(axios, options) {\n  var defaultConfig = {\n    insecure: false,\n    retryOnError: true,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    logHandler: function logHandler(level, data) {\n      if (level === 'error' && data) {\n        var title = [data.name, data.message].filter(function (a) {\n          return a;\n        }).join(' - ');\n        console.error(\"[error] \".concat(title));\n        console.error(data);\n        return;\n      }\n\n      console.log(\"[\".concat(level, \"] \").concat(data));\n    },\n    // Passed to axios\n    headers: {},\n    httpAgent: false,\n    httpsAgent: false,\n    timeout: 30000,\n    throttle: 0,\n    proxy: false,\n    basePath: '',\n    adapter: undefined,\n    maxContentLength: 1073741824,\n    // 1GB\n    maxBodyLength: 1073741824 // 1GB\n\n  };\n\n  var config = _objectSpread2(_objectSpread2({}, defaultConfig), options);\n\n  if (!config.accessToken) {\n    var missingAccessTokenError = new TypeError('Expected parameter accessToken');\n    config.logHandler('error', missingAccessTokenError);\n    throw missingAccessTokenError;\n  } // Construct axios baseURL option\n\n\n  var protocol = config.insecure ? 'http' : 'https';\n  var space = config.space ? \"\".concat(config.space, \"/\") : '';\n  var hostname = config.defaultHostname;\n  var port = config.insecure ? 80 : 443;\n\n  if (config.host && HOST_REGEX.test(config.host)) {\n    var parsed = config.host.split(':');\n\n    if (parsed.length === 2) {\n      var _parsed = _slicedToArray(parsed, 2);\n\n      hostname = _parsed[0];\n      port = _parsed[1];\n    } else {\n      hostname = parsed[0];\n    }\n  } // Ensure that basePath does start but not end with a slash\n\n\n  if (config.basePath) {\n    config.basePath = \"/\".concat(config.basePath.split('/').filter(Boolean).join('/'));\n  }\n\n  var baseURL = options.baseURL || \"\".concat(protocol, \"://\").concat(hostname, \":\").concat(port).concat(config.basePath, \"/spaces/\").concat(space);\n\n  if (!config.headers.Authorization && typeof config.accessToken !== 'function') {\n    config.headers.Authorization = 'Bearer ' + config.accessToken;\n  }\n\n  var axiosOptions = {\n    // Axios\n    baseURL: baseURL,\n    headers: config.headers,\n    httpAgent: config.httpAgent,\n    httpsAgent: config.httpsAgent,\n    paramsSerializer: qs.stringify,\n    proxy: config.proxy,\n    timeout: config.timeout,\n    adapter: config.adapter,\n    maxContentLength: config.maxContentLength,\n    maxBodyLength: config.maxBodyLength,\n    // Contentful\n    logHandler: config.logHandler,\n    responseLogger: config.responseLogger,\n    requestLogger: config.requestLogger,\n    retryOnError: config.retryOnError\n  };\n  var instance = axios.create(axiosOptions);\n  instance.httpClientParams = options;\n  /**\n   * Creates a new axios instance with the same default base parameters as the\n   * current one, and with any overrides passed to the newParams object\n   * This is useful as the SDKs use dependency injection to get the axios library\n   * and the version of the library comes from different places depending\n   * on whether it's a browser build or a node.js build.\n   * @private\n   * @param {CreateHttpClientParams} httpClientParams - Initialization parameters for the HTTP client\n   * @return {ContentfulAxiosInstance} Initialized axios instance\n   */\n\n  instance.cloneWithNewParams = function (newParams) {\n    return createHttpClient(axios, _objectSpread2(_objectSpread2({}, copy(options)), newParams));\n  };\n  /**\n   * Apply interceptors.\n   * Please note that the order of interceptors is important\n   */\n\n\n  if (config.onBeforeRequest) {\n    instance.interceptors.request.use(config.onBeforeRequest);\n  }\n\n  if (typeof config.accessToken === 'function') {\n    asyncToken(instance, config.accessToken);\n  }\n\n  if (config.throttle) {\n    rateLimitThrottle(instance, config.throttle);\n  }\n\n  rateLimit(instance, config.retryLimit);\n\n  if (config.onError) {\n    instance.interceptors.response.use(function (response) {\n      return response;\n    }, config.onError);\n  }\n\n  return instance;\n}\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Creates request parameters configuration by parsing an existing query object\n * @private\n * @param {Object} query\n * @return {Object} Config object with `params` property, ready to be used in axios\n */\n\n\nfunction createRequestConfig(_ref) {\n  var query = _ref.query;\n  var config = {};\n  delete query.resolveLinks;\n  config.params = copy(query);\n  return config;\n} // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\nfunction enforceObjPath(obj, path) {\n  if (!(path in obj)) {\n    var err = new Error();\n    err.name = 'PropertyMissing';\n    err.message = \"Required property \".concat(path, \" missing from:\\n\\n\").concat(JSON.stringify(obj), \"\\n\\n\");\n    throw err;\n  }\n\n  return true;\n} // copied from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\n\n\nfunction deepFreeze(object) {\n  var propNames = Object.getOwnPropertyNames(object);\n\n  var _iterator = _createForOfIteratorHelper(propNames),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var name = _step.value;\n      var value = object[name];\n\n      if (value && _typeof(value) === 'object') {\n        deepFreeze(value);\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return Object.freeze(object);\n}\n\nfunction freezeSys(obj) {\n  deepFreeze(obj.sys || {});\n  return obj;\n}\n\nfunction getBrowserOS() {\n  var win = getWindow();\n\n  if (!win) {\n    return null;\n  }\n\n  var userAgent = win.navigator.userAgent; // TODO: platform is deprecated.\n\n  var platform = win.navigator.platform;\n  var macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'];\n  var windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];\n  var iosPlatforms = ['iPhone', 'iPad', 'iPod'];\n\n  if (macosPlatforms.indexOf(platform) !== -1) {\n    return 'macOS';\n  } else if (iosPlatforms.indexOf(platform) !== -1) {\n    return 'iOS';\n  } else if (windowsPlatforms.indexOf(platform) !== -1) {\n    return 'Windows';\n  } else if (/Android/.test(userAgent)) {\n    return 'Android';\n  } else if (/Linux/.test(platform)) {\n    return 'Linux';\n  }\n\n  return null;\n}\n\nfunction getNodeOS() {\n  var platform = process.platform || 'linux';\n  var version = process.version || '0.0.0';\n  var platformMap = {\n    android: 'Android',\n    aix: 'Linux',\n    darwin: 'macOS',\n    freebsd: 'Linux',\n    linux: 'Linux',\n    openbsd: 'Linux',\n    sunos: 'Linux',\n    win32: 'Windows'\n  };\n\n  if (platform in platformMap) {\n    return \"\".concat(platformMap[platform] || 'Linux', \"/\").concat(version);\n  }\n\n  return null;\n}\n\nfunction getUserAgentHeader(sdk, application, integration, feature) {\n  var headerParts = [];\n\n  if (application) {\n    headerParts.push(\"app \".concat(application));\n  }\n\n  if (integration) {\n    headerParts.push(\"integration \".concat(integration));\n  }\n\n  if (feature) {\n    headerParts.push('feature ' + feature);\n  }\n\n  headerParts.push(\"sdk \".concat(sdk));\n  var platform = null;\n\n  try {\n    if (isReactNative()) {\n      platform = getBrowserOS();\n      headerParts.push('platform ReactNative');\n    } else if (isNode()) {\n      platform = getNodeOS();\n      headerParts.push(\"platform node.js/\".concat(getNodeVersion()));\n    } else {\n      platform = getBrowserOS();\n      headerParts.push('platform browser');\n    }\n  } catch (e) {\n    platform = null;\n  }\n\n  if (platform) {\n    headerParts.push(\"os \".concat(platform));\n  }\n\n  return \"\".concat(headerParts.filter(function (item) {\n    return item !== '';\n  }).join('; '), \";\");\n}\n/**\n * Mixes in a method to return just a plain object with no additional methods\n * @private\n * @param data - Any plain JSON response returned from the API\n * @return Enhanced object with toPlainObject method\n */\n\n\nfunction toPlainObject(data) {\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-expect-error\n  return Object.defineProperty(data, 'toPlainObject', {\n    enumerable: false,\n    configurable: false,\n    writable: false,\n    value: function value() {\n      return copy(this);\n    }\n  });\n}\n/**\n * Handles errors received from the server. Parses the error into a more useful\n * format, places it in an exception and throws it.\n * See https://www.contentful.com/developers/docs/references/errors/\n * for more details on the data received on the errorResponse.data property\n * and the expected error codes.\n * @private\n */\n\n\nfunction errorHandler(errorResponse) {\n  var config = errorResponse.config,\n      response = errorResponse.response;\n  var errorName; // Obscure the Management token\n\n  if (config && config.headers && config.headers['Authorization']) {\n    var token = \"...\".concat(config.headers['Authorization'].toString().substr(-5));\n    config.headers['Authorization'] = \"Bearer \".concat(token);\n  }\n\n  if (!isPlainObject(response) || !isPlainObject(config)) {\n    throw errorResponse;\n  }\n\n  var data = response === null || response === void 0 ? void 0 : response.data;\n  var errorData = {\n    status: response === null || response === void 0 ? void 0 : response.status,\n    statusText: response === null || response === void 0 ? void 0 : response.statusText,\n    message: '',\n    details: {}\n  };\n\n  if (isPlainObject(config)) {\n    errorData.request = {\n      url: config.url,\n      headers: config.headers,\n      method: config.method,\n      payloadData: config.data\n    };\n  }\n\n  if (data && isPlainObject(data)) {\n    if ('requestId' in data) {\n      errorData.requestId = data.requestId || 'UNKNOWN';\n    }\n\n    if ('message' in data) {\n      errorData.message = data.message || '';\n    }\n\n    if ('details' in data) {\n      errorData.details = data.details || {};\n    }\n\n    if ('sys' in data) {\n      if ('id' in data.sys) {\n        errorName = data.sys.id;\n      }\n    }\n  }\n\n  var error = new Error();\n  error.name = errorName && errorName !== 'Unknown' ? errorName : \"\".concat(response === null || response === void 0 ? void 0 : response.status, \" \").concat(response === null || response === void 0 ? void 0 : response.statusText);\n\n  try {\n    error.message = JSON.stringify(errorData, null, '  ');\n  } catch (_unused) {\n    var _errorData$message;\n\n    error.message = (_errorData$message = errorData === null || errorData === void 0 ? void 0 : errorData.message) !== null && _errorData$message !== void 0 ? _errorData$message : '';\n  }\n\n  throw error;\n}\n\nexport { createHttpClient, createRequestConfig, enforceObjPath, errorHandler, freezeSys, getUserAgentHeader, toPlainObject };","map":{"version":3,"names":["copy","qs","isString","pThrottle","isPlainObject","_iterableToArrayLimit","arr","i","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","call","next","Object","done","push","value","length","err","return","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread2","target","arguments","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_typeof","obj","constructor","prototype","_wrapRegExp","re","groups","BabelRegExp","_super","RegExp","_groups","WeakMap","flags","_this","set","get","_setPrototypeOf","buildGroups","result","g","reduce","name","k","create","_inherits","exec","str","indices","replace","substitution","_","group","Array","isArray","join","args","slice","_toPropertyKey","configurable","writable","subClass","superClass","TypeError","o","p","setPrototypeOf","bind","__proto__","_slicedToArray","_arrayWithHoles","_unsupportedIterableToArray","_nonIterableRest","minLen","_arrayLikeToArray","n","toString","from","test","len","arr2","_createForOfIteratorHelper","allowArrayLike","it","F","s","e","f","normalCompletion","didErr","step","_toPrimitive","input","hint","prim","toPrimitive","undefined","res","String","Number","arg","isNode","process","browser","isReactNative","window","navigator","product","getNodeVersion","versions","node","concat","version","getWindow","noop","PERCENTAGE_REGEX","calculateLimit","type","max","limit","_type$match","match","percentage","parseInt","Math","round","min","createThrottle","logger","interval","strict","rateLimitThrottle","axiosInstance","_axiosInstance$defaul","defaults","logHandler","throttle","isCalculated","requestInterceptorId","interceptors","request","use","config","error","Promise","reject","responseInterceptorId","response","headers","rawLimit","nextLimit","eject","delay","ms","resolve","setTimeout","defaultWait","attempts","pow","SQRT2","rateLimit","instance","maxRetry","_instance$defaults","_instance$defaults$re","responseLogger","_instance$defaults$re2","requestLogger","retryOnError","doneAttempts","retryErrorType","wait","status","floor","random","httpAgent","httpsAgent","then","asyncToken","getToken","accessToken","Authorization","HOST_REGEX","createHttpClient","axios","options","defaultConfig","insecure","level","data","title","message","a","console","log","timeout","proxy","basePath","adapter","maxContentLength","maxBodyLength","missingAccessTokenError","protocol","space","hostname","defaultHostname","port","host","parsed","split","_parsed","Boolean","baseURL","axiosOptions","paramsSerializer","stringify","httpClientParams","cloneWithNewParams","newParams","onBeforeRequest","retryLimit","onError","createRequestConfig","_ref","query","resolveLinks","params","enforceObjPath","path","Error","JSON","deepFreeze","propNames","getOwnPropertyNames","_iterator","_step","freeze","freezeSys","sys","getBrowserOS","win","userAgent","platform","macosPlatforms","windowsPlatforms","iosPlatforms","indexOf","getNodeOS","platformMap","android","aix","darwin","freebsd","linux","openbsd","sunos","win32","getUserAgentHeader","sdk","application","integration","feature","headerParts","item","toPlainObject","errorHandler","errorResponse","errorName","token","substr","errorData","statusText","details","url","method","payloadData","requestId","id","_unused","_errorData$message"],"sources":["C:/Users/hp/Desktop/CATCOM2/CATCOM/angular/catcom/node_modules/contentful-sdk-core/dist/index.es-modules.js"],"sourcesContent":["import copy from 'fast-copy';\nimport qs from 'qs';\nimport isString from 'lodash.isstring';\nimport pThrottle from 'p-throttle';\nimport isPlainObject from 'lodash.isplainobject';\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i.return && (_r = _i.return(), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nfunction _wrapRegExp() {\n  _wrapRegExp = function (re, groups) {\n    return new BabelRegExp(re, void 0, groups);\n  };\n  var _super = RegExp.prototype,\n    _groups = new WeakMap();\n  function BabelRegExp(re, flags, groups) {\n    var _this = new RegExp(re, flags);\n    return _groups.set(_this, groups || _groups.get(re)), _setPrototypeOf(_this, BabelRegExp.prototype);\n  }\n  function buildGroups(result, re) {\n    var g = _groups.get(re);\n    return Object.keys(g).reduce(function (groups, name) {\n      var i = g[name];\n      if (\"number\" == typeof i) groups[name] = result[i];else {\n        for (var k = 0; void 0 === result[i[k]] && k + 1 < i.length;) k++;\n        groups[name] = result[i[k]];\n      }\n      return groups;\n    }, Object.create(null));\n  }\n  return _inherits(BabelRegExp, RegExp), BabelRegExp.prototype.exec = function (str) {\n    var result = _super.exec.call(this, str);\n    if (result) {\n      result.groups = buildGroups(result, this);\n      var indices = result.indices;\n      indices && (indices.groups = buildGroups(indices, this));\n    }\n    return result;\n  }, BabelRegExp.prototype[Symbol.replace] = function (str, substitution) {\n    if (\"string\" == typeof substitution) {\n      var groups = _groups.get(this);\n      return _super[Symbol.replace].call(this, str, substitution.replace(/\\$<([^>]+)>/g, function (_, name) {\n        var group = groups[name];\n        return \"$\" + (Array.isArray(group) ? group.join(\"$\") : group);\n      }));\n    }\n    if (\"function\" == typeof substitution) {\n      var _this = this;\n      return _super[Symbol.replace].call(this, str, function () {\n        var args = arguments;\n        return \"object\" != typeof args[args.length - 1] && (args = [].slice.call(args)).push(buildGroups(args, _this)), substitution.apply(this, args);\n      });\n    }\n    return _super[Symbol.replace].call(this, str, substitution);\n  }, _wrapRegExp.apply(this, arguments);\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (!it) {\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      var F = function () {};\n      return {\n        s: F,\n        n: function () {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function (e) {\n          throw e;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function () {\n      it = it.call(o);\n    },\n    n: function () {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function (e) {\n      didErr = true;\n      err = e;\n    },\n    f: function () {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nfunction isNode() {\n  /**\n   * Polyfills of 'process' might set process.browser === true\n   *\n   * See:\n   * https://github.com/webpack/node-libs-browser/blob/master/mock/process.js#L8\n   * https://github.com/defunctzombie/node-process/blob/master/browser.js#L156\n   **/\n  return typeof process !== 'undefined' && !process.browser;\n}\nfunction isReactNative() {\n  return typeof window !== 'undefined' && 'navigator' in window && 'product' in window.navigator && window.navigator.product === 'ReactNative';\n}\nfunction getNodeVersion() {\n  return process.versions && process.versions.node ? \"v\".concat(process.versions.node) : process.version;\n}\nfunction getWindow() {\n  return window;\n}\nfunction noop() {\n  return undefined;\n}\n\nvar PERCENTAGE_REGEX = /*#__PURE__*/_wrapRegExp(/(\\d+)(%)/, {\n  value: 1\n});\nfunction calculateLimit(type) {\n  var max = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 7;\n  var limit = max;\n  if (PERCENTAGE_REGEX.test(type)) {\n    var _type$match;\n    var groups = (_type$match = type.match(PERCENTAGE_REGEX)) === null || _type$match === void 0 ? void 0 : _type$match.groups;\n    if (groups && groups.value) {\n      var percentage = parseInt(groups.value) / 100;\n      limit = Math.round(max * percentage);\n    }\n  }\n  return Math.min(30, Math.max(1, limit));\n}\nfunction createThrottle(limit, logger) {\n  logger('info', \"Throttle request to \".concat(limit, \"/s\"));\n  return pThrottle({\n    limit: limit,\n    interval: 1000,\n    strict: false\n  });\n}\nvar rateLimitThrottle = (function (axiosInstance) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'auto';\n  var _axiosInstance$defaul = axiosInstance.defaults.logHandler,\n    logHandler = _axiosInstance$defaul === void 0 ? noop : _axiosInstance$defaul;\n  var limit = isString(type) ? calculateLimit(type) : calculateLimit('auto', type);\n  var throttle = createThrottle(limit, logHandler);\n  var isCalculated = false;\n  var requestInterceptorId = axiosInstance.interceptors.request.use(function (config) {\n    return throttle(function () {\n      return config;\n    })();\n  }, function (error) {\n    return Promise.reject(error);\n  });\n  var responseInterceptorId = axiosInstance.interceptors.response.use(function (response) {\n    if (!isCalculated && isString(type) && (type === 'auto' || PERCENTAGE_REGEX.test(type)) && response.headers && response.headers['x-contentful-ratelimit-second-limit']) {\n      var rawLimit = parseInt(response.headers['x-contentful-ratelimit-second-limit']);\n      var nextLimit = calculateLimit(type, rawLimit);\n      if (nextLimit !== limit) {\n        if (requestInterceptorId) {\n          axiosInstance.interceptors.request.eject(requestInterceptorId);\n        }\n        limit = nextLimit;\n        throttle = createThrottle(nextLimit, logHandler);\n        requestInterceptorId = axiosInstance.interceptors.request.use(function (config) {\n          return throttle(function () {\n            return config;\n          })();\n        }, function (error) {\n          return Promise.reject(error);\n        });\n      }\n      isCalculated = true;\n    }\n    return response;\n  }, function (error) {\n    return Promise.reject(error);\n  });\n  return function () {\n    axiosInstance.interceptors.request.eject(requestInterceptorId);\n    axiosInstance.interceptors.response.eject(responseInterceptorId);\n  };\n});\n\nvar delay = function delay(ms) {\n  return new Promise(function (resolve) {\n    setTimeout(resolve, ms);\n  });\n};\nvar defaultWait = function defaultWait(attempts) {\n  return Math.pow(Math.SQRT2, attempts);\n};\nfunction rateLimit(instance) {\n  var maxRetry = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;\n  var _instance$defaults = instance.defaults,\n    _instance$defaults$re = _instance$defaults.responseLogger,\n    responseLogger = _instance$defaults$re === void 0 ? noop : _instance$defaults$re,\n    _instance$defaults$re2 = _instance$defaults.requestLogger,\n    requestLogger = _instance$defaults$re2 === void 0 ? noop : _instance$defaults$re2;\n  instance.interceptors.request.use(function (config) {\n    requestLogger(config);\n    return config;\n  }, function (error) {\n    requestLogger(error);\n    return Promise.reject(error);\n  });\n  instance.interceptors.response.use(function (response) {\n    // we don't need to do anything here\n    responseLogger(response);\n    return response;\n  }, function (error) {\n    var response = error.response;\n    var config = error.config;\n    responseLogger(error);\n    // Do not retry if it is disabled or no request config exists (not an axios error)\n    if (!config || !instance.defaults.retryOnError) {\n      return Promise.reject(error);\n    }\n\n    // Retried already for max attempts\n    var doneAttempts = config.attempts || 1;\n    if (doneAttempts > maxRetry) {\n      error.attempts = config.attempts;\n      return Promise.reject(error);\n    }\n    var retryErrorType = null;\n    var wait = defaultWait(doneAttempts);\n\n    // Errors without response did not receive anything from the server\n    if (!response) {\n      retryErrorType = 'Connection';\n    } else if (response.status >= 500 && response.status < 600) {\n      // 5** errors are server related\n      retryErrorType = \"Server \".concat(response.status);\n    } else if (response.status === 429) {\n      // 429 errors are exceeded rate limit exceptions\n      retryErrorType = 'Rate limit';\n      // all headers are lowercased by axios https://github.com/mzabriskie/axios/issues/413\n      if (response.headers && error.response.headers['x-contentful-ratelimit-reset']) {\n        wait = response.headers['x-contentful-ratelimit-reset'];\n      }\n    }\n    if (retryErrorType) {\n      // convert to ms and add jitter\n      wait = Math.floor(wait * 1000 + Math.random() * 200 + 500);\n      instance.defaults.logHandler('warning', \"\".concat(retryErrorType, \" error occurred. Waiting for \").concat(wait, \" ms before retrying...\"));\n\n      // increase attempts counter\n      config.attempts = doneAttempts + 1;\n\n      /* Somehow between the interceptor and retrying the request the httpAgent/httpsAgent gets transformed from an Agent-like object\n       to a regular object, causing failures on retries after rate limits. Removing these properties here fixes the error, but retry\n       requests still use the original http/httpsAgent property */\n      delete config.httpAgent;\n      delete config.httpsAgent;\n      return delay(wait).then(function () {\n        return instance(config);\n      });\n    }\n    return Promise.reject(error);\n  });\n}\n\nfunction asyncToken(instance, getToken) {\n  instance.interceptors.request.use(function (config) {\n    return getToken().then(function (accessToken) {\n      config.headers = _objectSpread2(_objectSpread2({}, config.headers), {}, {\n        Authorization: \"Bearer \".concat(accessToken)\n      });\n      return config;\n    });\n  });\n}\n\n// Matches 'sub.host:port' or 'host:port' and extracts hostname and port\n// Also enforces toplevel domain specified, no spaces and no protocol\nvar HOST_REGEX = /^(?!\\w+:\\/\\/)([^\\s:]+\\.?[^\\s:]+)(?::(\\d+))?(?!:)$/;\n\n/**\n * Create pre configured axios instance\n * @private\n * @param {AxiosStatic} axios - Axios library\n * @param {CreateHttpClientParams} options - Initialization parameters for the HTTP client\n * @return {ContentfulAxiosInstance} Initialized axios instance\n */\nfunction createHttpClient(axios, options) {\n  var defaultConfig = {\n    insecure: false,\n    retryOnError: true,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    logHandler: function logHandler(level, data) {\n      if (level === 'error' && data) {\n        var title = [data.name, data.message].filter(function (a) {\n          return a;\n        }).join(' - ');\n        console.error(\"[error] \".concat(title));\n        console.error(data);\n        return;\n      }\n      console.log(\"[\".concat(level, \"] \").concat(data));\n    },\n    // Passed to axios\n    headers: {},\n    httpAgent: false,\n    httpsAgent: false,\n    timeout: 30000,\n    throttle: 0,\n    proxy: false,\n    basePath: '',\n    adapter: undefined,\n    maxContentLength: 1073741824,\n    // 1GB\n    maxBodyLength: 1073741824 // 1GB\n  };\n\n  var config = _objectSpread2(_objectSpread2({}, defaultConfig), options);\n  if (!config.accessToken) {\n    var missingAccessTokenError = new TypeError('Expected parameter accessToken');\n    config.logHandler('error', missingAccessTokenError);\n    throw missingAccessTokenError;\n  }\n\n  // Construct axios baseURL option\n  var protocol = config.insecure ? 'http' : 'https';\n  var space = config.space ? \"\".concat(config.space, \"/\") : '';\n  var hostname = config.defaultHostname;\n  var port = config.insecure ? 80 : 443;\n  if (config.host && HOST_REGEX.test(config.host)) {\n    var parsed = config.host.split(':');\n    if (parsed.length === 2) {\n      var _parsed = _slicedToArray(parsed, 2);\n      hostname = _parsed[0];\n      port = _parsed[1];\n    } else {\n      hostname = parsed[0];\n    }\n  }\n\n  // Ensure that basePath does start but not end with a slash\n  if (config.basePath) {\n    config.basePath = \"/\".concat(config.basePath.split('/').filter(Boolean).join('/'));\n  }\n  var baseURL = options.baseURL || \"\".concat(protocol, \"://\").concat(hostname, \":\").concat(port).concat(config.basePath, \"/spaces/\").concat(space);\n  if (!config.headers.Authorization && typeof config.accessToken !== 'function') {\n    config.headers.Authorization = 'Bearer ' + config.accessToken;\n  }\n  var axiosOptions = {\n    // Axios\n    baseURL: baseURL,\n    headers: config.headers,\n    httpAgent: config.httpAgent,\n    httpsAgent: config.httpsAgent,\n    paramsSerializer: qs.stringify,\n    proxy: config.proxy,\n    timeout: config.timeout,\n    adapter: config.adapter,\n    maxContentLength: config.maxContentLength,\n    maxBodyLength: config.maxBodyLength,\n    // Contentful\n    logHandler: config.logHandler,\n    responseLogger: config.responseLogger,\n    requestLogger: config.requestLogger,\n    retryOnError: config.retryOnError\n  };\n  var instance = axios.create(axiosOptions);\n  instance.httpClientParams = options;\n\n  /**\n   * Creates a new axios instance with the same default base parameters as the\n   * current one, and with any overrides passed to the newParams object\n   * This is useful as the SDKs use dependency injection to get the axios library\n   * and the version of the library comes from different places depending\n   * on whether it's a browser build or a node.js build.\n   * @private\n   * @param {CreateHttpClientParams} httpClientParams - Initialization parameters for the HTTP client\n   * @return {ContentfulAxiosInstance} Initialized axios instance\n   */\n  instance.cloneWithNewParams = function (newParams) {\n    return createHttpClient(axios, _objectSpread2(_objectSpread2({}, copy(options)), newParams));\n  };\n\n  /**\n   * Apply interceptors.\n   * Please note that the order of interceptors is important\n   */\n\n  if (config.onBeforeRequest) {\n    instance.interceptors.request.use(config.onBeforeRequest);\n  }\n  if (typeof config.accessToken === 'function') {\n    asyncToken(instance, config.accessToken);\n  }\n  if (config.throttle) {\n    rateLimitThrottle(instance, config.throttle);\n  }\n  rateLimit(instance, config.retryLimit);\n  if (config.onError) {\n    instance.interceptors.response.use(function (response) {\n      return response;\n    }, config.onError);\n  }\n  return instance;\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Creates request parameters configuration by parsing an existing query object\n * @private\n * @param {Object} query\n * @return {Object} Config object with `params` property, ready to be used in axios\n */\nfunction createRequestConfig(_ref) {\n  var query = _ref.query;\n  var config = {};\n  delete query.resolveLinks;\n  config.params = copy(query);\n  return config;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction enforceObjPath(obj, path) {\n  if (!(path in obj)) {\n    var err = new Error();\n    err.name = 'PropertyMissing';\n    err.message = \"Required property \".concat(path, \" missing from:\\n\\n\").concat(JSON.stringify(obj), \"\\n\\n\");\n    throw err;\n  }\n  return true;\n}\n\n// copied from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\n\nfunction deepFreeze(object) {\n  var propNames = Object.getOwnPropertyNames(object);\n  var _iterator = _createForOfIteratorHelper(propNames),\n    _step;\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var name = _step.value;\n      var value = object[name];\n      if (value && _typeof(value) === 'object') {\n        deepFreeze(value);\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return Object.freeze(object);\n}\nfunction freezeSys(obj) {\n  deepFreeze(obj.sys || {});\n  return obj;\n}\n\nfunction getBrowserOS() {\n  var win = getWindow();\n  if (!win) {\n    return null;\n  }\n  var userAgent = win.navigator.userAgent;\n  // TODO: platform is deprecated.\n  var platform = win.navigator.platform;\n  var macosPlatforms = ['Macintosh', 'MacIntel', 'MacPPC', 'Mac68K'];\n  var windowsPlatforms = ['Win32', 'Win64', 'Windows', 'WinCE'];\n  var iosPlatforms = ['iPhone', 'iPad', 'iPod'];\n  if (macosPlatforms.indexOf(platform) !== -1) {\n    return 'macOS';\n  } else if (iosPlatforms.indexOf(platform) !== -1) {\n    return 'iOS';\n  } else if (windowsPlatforms.indexOf(platform) !== -1) {\n    return 'Windows';\n  } else if (/Android/.test(userAgent)) {\n    return 'Android';\n  } else if (/Linux/.test(platform)) {\n    return 'Linux';\n  }\n  return null;\n}\nfunction getNodeOS() {\n  var platform = process.platform || 'linux';\n  var version = process.version || '0.0.0';\n  var platformMap = {\n    android: 'Android',\n    aix: 'Linux',\n    darwin: 'macOS',\n    freebsd: 'Linux',\n    linux: 'Linux',\n    openbsd: 'Linux',\n    sunos: 'Linux',\n    win32: 'Windows'\n  };\n  if (platform in platformMap) {\n    return \"\".concat(platformMap[platform] || 'Linux', \"/\").concat(version);\n  }\n  return null;\n}\nfunction getUserAgentHeader(sdk, application, integration, feature) {\n  var headerParts = [];\n  if (application) {\n    headerParts.push(\"app \".concat(application));\n  }\n  if (integration) {\n    headerParts.push(\"integration \".concat(integration));\n  }\n  if (feature) {\n    headerParts.push('feature ' + feature);\n  }\n  headerParts.push(\"sdk \".concat(sdk));\n  var platform = null;\n  try {\n    if (isReactNative()) {\n      platform = getBrowserOS();\n      headerParts.push('platform ReactNative');\n    } else if (isNode()) {\n      platform = getNodeOS();\n      headerParts.push(\"platform node.js/\".concat(getNodeVersion()));\n    } else {\n      platform = getBrowserOS();\n      headerParts.push('platform browser');\n    }\n  } catch (e) {\n    platform = null;\n  }\n  if (platform) {\n    headerParts.push(\"os \".concat(platform));\n  }\n  return \"\".concat(headerParts.filter(function (item) {\n    return item !== '';\n  }).join('; '), \";\");\n}\n\n/**\n * Mixes in a method to return just a plain object with no additional methods\n * @private\n * @param data - Any plain JSON response returned from the API\n * @return Enhanced object with toPlainObject method\n */\nfunction toPlainObject(data) {\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-expect-error\n  return Object.defineProperty(data, 'toPlainObject', {\n    enumerable: false,\n    configurable: false,\n    writable: false,\n    value: function value() {\n      return copy(this);\n    }\n  });\n}\n\n/**\n * Handles errors received from the server. Parses the error into a more useful\n * format, places it in an exception and throws it.\n * See https://www.contentful.com/developers/docs/references/errors/\n * for more details on the data received on the errorResponse.data property\n * and the expected error codes.\n * @private\n */\nfunction errorHandler(errorResponse) {\n  var config = errorResponse.config,\n    response = errorResponse.response;\n  var errorName;\n\n  // Obscure the Management token\n  if (config && config.headers && config.headers['Authorization']) {\n    var token = \"...\".concat(config.headers['Authorization'].toString().substr(-5));\n    config.headers['Authorization'] = \"Bearer \".concat(token);\n  }\n  if (!isPlainObject(response) || !isPlainObject(config)) {\n    throw errorResponse;\n  }\n  var data = response === null || response === void 0 ? void 0 : response.data;\n  var errorData = {\n    status: response === null || response === void 0 ? void 0 : response.status,\n    statusText: response === null || response === void 0 ? void 0 : response.statusText,\n    message: '',\n    details: {}\n  };\n  if (isPlainObject(config)) {\n    errorData.request = {\n      url: config.url,\n      headers: config.headers,\n      method: config.method,\n      payloadData: config.data\n    };\n  }\n  if (data && isPlainObject(data)) {\n    if ('requestId' in data) {\n      errorData.requestId = data.requestId || 'UNKNOWN';\n    }\n    if ('message' in data) {\n      errorData.message = data.message || '';\n    }\n    if ('details' in data) {\n      errorData.details = data.details || {};\n    }\n    if ('sys' in data) {\n      if ('id' in data.sys) {\n        errorName = data.sys.id;\n      }\n    }\n  }\n  var error = new Error();\n  error.name = errorName && errorName !== 'Unknown' ? errorName : \"\".concat(response === null || response === void 0 ? void 0 : response.status, \" \").concat(response === null || response === void 0 ? void 0 : response.statusText);\n  try {\n    error.message = JSON.stringify(errorData, null, '  ');\n  } catch (_unused) {\n    var _errorData$message;\n    error.message = (_errorData$message = errorData === null || errorData === void 0 ? void 0 : errorData.message) !== null && _errorData$message !== void 0 ? _errorData$message : '';\n  }\n  throw error;\n}\n\nexport { createHttpClient, createRequestConfig, enforceObjPath, errorHandler, freezeSys, getUserAgentHeader, toPlainObject };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}